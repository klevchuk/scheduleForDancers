<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="https://klevchuk.github.io/scheduleForDancers/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://klevchuk.github.io/scheduleForDancers/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://klevchuk.github.io/scheduleForDancers/favicon-16x16.png">
    <link rel="manifest" href="https://klevchuk.github.io/scheduleForDancers/site.webmanifest">
    <link rel="shortcut icon" href="https://klevchuk.github.io/scheduleForDancers/favicon.ico" type="image/x-icon">
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —à–æ—É</title>
    <style>
        :root{
            --bg:#f0f8f0;
            --primary:#388e3c;
            --accent:#9575cd;
            --text:#4a148c;
            --light:#fff;
            --copy-color: #4caf50;
        }
        *{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
        html,body{height:100%}
        body{background:var(--bg);color:var(--text);display:flex;flex-direction:column}

        header{background:var(--primary);color:var(--light);padding:12px 16px;font-size:18px;text-align:center}

        .tabs{display:flex;height:48px}
        .tab{flex:1;border:none;background:#e8f5f9;color:var(--primary);font-size:14px}
        .tab.active{background:var(--light);border-bottom:3px solid var(--primary)}

        .content{position:relative;overflow:hidden;height:calc(100vh - 48px - 48px)}
        .tab-content{position:absolute;top:0;left:0;width:100%;height:100%;padding:16px;transition:transform .3s;overflow-y:auto}
        .tab-content:nth-child(1){transform:translateX(0)}
        .tab-content:nth-child(2){transform:translateX(100%)}

        textarea{width:100%;min-height:180px;padding:8px;border:1px solid #c8e6c9;border-radius:5px;font-size:16px}
        input[type=password],input[type=text]{width:100%;padding:8px;margin-bottom:8px;border:1px solid #c8e6c9;border-radius:5px;font-size:16px}
        button{width:100%;padding:12px;background:var(--accent);color:var(--light);border:none;border-radius:5px;font-size:16px;margin-bottom:8px}
        button:active{background:#7e57c2}
        button.copy-btn{background:var(--copy-color)}

        .date-display{background:var(--bg);color:var(--primary);padding:10px;border-radius:5px;font-weight:700;text-align:center;margin-bottom:10px}
        .dancer-list{background:#f3e5f5;border:1px solid #d1c4e9;border-radius:5px;padding:10px;margin-top:10px}
        .dancer-list h3{color:#8c2c14;text-align:right;margin-bottom:5px;font-size:16px}
        .dancer-list ul{list-style:none}
        .dancer-list li{padding:4px 0;border-bottom:1px solid #e0e0e0}
        .dancer-list li button {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
            text-align: center;
            margin: 0 5px;
            text-decoration: none;
            color: var(--text);
            transition: background 0.3s, border 0.3s;
        }
        .dancer-list li button:hover {
            background: rgba(255, 255, 255, 1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }
        .dancer-list li button span {
            font-size: 16px;
            display: block;
            text-align: center;
        }
        .error,.success{margin-top:8px;font-size:14px}
        pre{background:#f5f5f5;border:1px solid #ccc;border-radius:5px;padding:8px;white-space:pre-wrap;word-break:break-all;font-size:13px}

        .back-button-container {
            background: transparent;
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            margin-top: 10px;
        }
        .back-button-container button {
            background: var(--light);
            color: var(--primary);
            border: none;
            border-radius: 5px;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }
        .back-button-container button:hover {
            background: #e0f2f1;
        }
    </style>
</head>
<body>
<h3 style="color: red; position: fixed; top: 0; right: 0; margin: 0;">beta</h3>
<header>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —à–æ—É</header>

<div class="tabs">
    <button class="tab active" id="tab1Btn">–ü–æ–ª–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
    <button class="tab" id="tab2Btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
</div>

<div class="content" id="content">
    <div class="tab-content" id="scheduleDisplay">
        <div id="dateDisplay" class="date-display"></div>
        <div id="scheduleList" class="dancer-list">
            <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –¥–µ–Ω—å:</h3>
            <ul id="scheduleListUl"></ul>
        </div>
        <div class="back-button-container" id="backButtonContainer"></div>
    </div>

    <div class="tab-content" id="schedule">
        <textarea id="scheduleText" placeholder="–¥–∞—Ç–∞: —á–∏—Å–ª–æ –∏ –º–µ—Å—è—Ü

–Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ñ–æ –æ —à–æ—É
—Å–æ—Å—Ç–∞–≤

–Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ñ–æ –æ —à–æ—É
—Å–æ—Å—Ç–∞–≤

...
"></textarea>
        <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
        <button onclick="generateCode()">–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å</button>
        <button class="copy-btn" onclick="copyToClipboard()">–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        <div id="saveMsg" style="display:none"></div>
        <pre id="generatedCode" style="display:none;margin-top:8px"></pre>
    </div>
</div>

<script>
/* ===== 1.  –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ ===== */

const schedule = {
    "22 –¥–µ–∫–∞–±—Ä—è": {
        "Day off": [
            "Anton",
            "Masha",
            "Vera",
            "Max",
            "Daria",
            "Yulian"
        ],
        "9:00 —Ä–µ–ø–µ—Ç–∏—Ü–∏—è –¥–ª—è 6 flag": [
            "Max",
            "Dima",
            "Akmal",
            "Yulian",
            "Sergey",
            "Rostik"
        ],
        "9:00 —Ä–µ–ø–µ—Ç–∏—Ü–∏—è –¥–ª—è 4/4": [
            "Andrey",
            "Eduard",
            "Oleg",
            "Denis",
            "Lera",
            "Avrora",
            "Mery",
            "Daria"
        ],
        "9:00 —Ä–µ–ø–µ—Ç–∏—Ü–∏—è –¥–ª—è 6 girls": [
            "Dasha",
            "Tanya",
            "Datri",
            "Krava",
            "Vika",
            "Vasya"
        ],
        "10:00 —Ä–µ–ø–µ—Ç–∏—Ü–∏—è –¥–ª—è 4/4 –¥—Ä–∞–∫–æ–Ω": [
            "Yaroslav",
            "Lemon",
            "Ilya",
            "Anton",
            "Alona",
            "Diana",
            "Miya",
            "Masha"
        ],
        "‚ö†Ô∏è‚ùóÔ∏è11:25 –ö–∞–Ω –ö–∞–Ω (magic theatre, come at 11:15 )": [
            "Denis",
            "Dima",
            "Alexandra",
            "Vika"
        ],
        "‚ùóÔ∏è11:45 –≤–∞–ª—å—Å (–∫–∞—Ä—É—Å–µ–ª—å, come at 11:40)": [
            "Yaroslav",
            "Ilya",
            "Andrey",
            "Krava",
            "Alona",
            "Avrora"
        ],
        "‚ùóÔ∏è12:45  –º—É–∂—Å–∫–æ–π (come at 12:40)": [
            "Evgeny",
            "Andrey",
            "Akmal",
            "Rostik"
        ],
        "‚ùóÔ∏è13:00-13:30 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 12:55 1–¥, 2–¥ , 1–º)": [
            "Datri",
            "Anatoly"
        ],
        "‚ùóÔ∏è13:20- 13:50 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 13:15, 3–º)": [],
        "‚ùóÔ∏è13:30 - 14:00 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 13:25,  3–¥, 2–º, 5–¥)": [
            "Dasha",
            "Miya",
            "Alexey"
        ],
        "‚ùóÔ∏è13:30-14:00 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 13:25 –∫–æ—Ä–æ–ª–µ–≤–∞)": [
            "Tanya"
        ],
        "‚ùóÔ∏è13:25 –ö–∞–Ω –ö–∞–Ω (magic theatre, come at 13:20)": [
            "Dima",
            "Denis",
            "Krava",
            "Avrora"
        ],
        "‚ùóÔ∏è13:30 You can do it (come at 13:15)": [
            "Oleg",
            "Akmal",
            "Evgeny",
            "Eduard",
            "Alexandra",
            "Vasya",
            "Vika",
            "Sofiia"
        ],
        "‚ùóÔ∏è13:50 –≤–∞–ª—å—Å (–∫–∞—Ä—É—Å–µ–ª—å, come at 13:45)": [
            "Yaroslav",
            "Sergey",
            "Ilya",
            "Alona",
            "Diana",
            "Mery"
        ],
        "‚ùóÔ∏è15:00 –ü–∞—Ä–∞–¥ üë´–ü–∞—Ä–Ω—ã–π —é–Ω–∏—Ç": [
            "Andrey",
            "Oleg",
            "Eduard",
            "Denis",
            "Miya",
            "Sofiia",
            "Lera",
            "Avrora"
        ],
        "‚ùóÔ∏è15:00 –ü–∞—Ä–∞–¥ üíÉGirls": [
            "Mery",
            "Alexandra",
            "Krava",
            "Vasya",
            "Tanya",
            "Alona"
        ],
        "‚ùóÔ∏è15:00 –ü–∞—Ä–∞–¥ üï∫Boys": [
            "Rostik",
            "Sergey",
            "Dima",
            "Ilya",
            "Lemon",
            "Yaroslav"
        ],
        "‚ùóÔ∏è15:00 –ü–∞—Ä–∞–¥ üåº–¶–≤–µ—Ç—ã": [
            "Dasha",
            "Diana"
        ],
        "‚ùóÔ∏è16:00 you can do it ( come at 15:45)": [
            "Alexey",
            "Anatoly",
            "Akmal",
            "Rostik",
            "Vasya",
            "Mery",
            "Sofiia",
            "Lera"
        ],
        "‚ùóÔ∏è16:10 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 16:05 –∫–æ—Ä–æ–ª–µ–≤–∞)": [
            "Tanya"
        ],
        "‚ùóÔ∏è16:15 –í–∞–ª—å—Å (–∫–∞—Ä—É—Å–µ–ª—å, come at 16:10)": [
            "Lemon",
            "Ilya",
            "Yaroslav",
            "Krava",
            "Alona",
            "Diana"
        ],
        "‚ùóÔ∏è16:25 –º—É–∂—Å–∫–æ–π (come at 16:20)": [
            "Evgeny",
            "Oleg",
            "Sergey",
            "Andrey"
        ],
        "‚ùóÔ∏è16:30-17:00 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 16:25 1–¥, 3–º)": [
            "Datri"
        ],
        "‚ùóÔ∏è16:50-17:20 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 16:45 3–¥, 5–¥)": [
            "Dasha",
            "Miya"
        ],
        "‚ö†Ô∏è‚ùóÔ∏è16:55 –ö–∞–Ω –ö–∞–Ω (magic theatre, come at 16:50": [
            "Dima",
            "Lemon",
            "Alexandra",
            "Avrora"
        ],
        "‚ùóÔ∏è17:00-17:30 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 16:55, 2–º)": [
            "Alexey"
        ],
        "‚ùóÔ∏è17:15 Party (come at 17:10 ‚ùóÔ∏è –ø–æ—Å–ª–µ –ö–æ–ª—É–º–±–∏–∏ ‚ùóÔ∏è‚ùóÔ∏è‚ùóÔ∏è)": [
            "Evgeny",
            "Sergey",
            "Oleg",
            "Rostik",
            "Akmal",
            "Eduard",
            "Vika",
            "Mery",
            "Sofiia",
            "Lera",
            "Vasya",
            "Datri"
        ],
        "‚ùóÔ∏è17:20-17:50 —Ñ–æ—Ç–æ —Ç–∞–π–º (come at 17:15 2–¥, 1–º )": [
            "Anatoly"
        ]
    }
};

/* ===== 2.  –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ ===== */
const content = document.getElementById('content');
const tab1Btn = document.getElementById('tab1Btn');
const tab2Btn = document.getElementById('tab2Btn');
const pages = content.children;

function switchTab(n) {
    [tab1Btn, tab2Btn].forEach((btn, i) => btn.classList.toggle('active', i === n));
    pages[0].style.transform = n === 0 ? 'translateX(0)' : 'translateX(-100%)';
    pages[1].style.transform = n === 1 ? 'translateX(0)' : 'translateX(100%)';
}
tab1Btn.onclick = () => switchTab(0);
tab2Btn.onclick = () => switchTab(1);

// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–º–∞—Ö–∏–≤–∞–Ω–∏—è
let startX;

document.addEventListener('touchstart', (e) => {
    startX = e.touches[0].clientX;
});

document.addEventListener('touchend', (e) => {
    const endX = e.changedTouches[0].clientX;
    const deltaX = startX - endX;

    if (Math.abs(deltaX) > 50) {
        if (deltaX > 0) {
            // –°–º–∞—Ö–∏–≤–∞–Ω–∏–µ –≤–ª–µ–≤–æ
            switchTab(1);
        } else {
            // –°–º–∞—Ö–∏–≤–∞–Ω–∏–µ –≤–ø—Ä–∞–≤–æ
            switchTab(0);
        }
    }
});

/* ===== 3.  –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ ===== */
function generateCode() {
    const pwd = document.getElementById('password').value.trim();
    const msg = document.getElementById('saveMsg');
    const out = document.getElementById('generatedCode');

    if (pwd !== '123') {
        msg.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å';
        msg.className = 'error';
        msg.style.display = 'block';
        out.style.display = 'none';
        return;
    }

    const raw = document.getElementById('scheduleText').value.trim();
    if (!raw) {
        msg.textContent = '–ü—É—Å—Ç–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ';
        msg.className = 'error';
        msg.style.display = 'block';
        out.style.display = 'none';
        return;
    }

    const lines = raw.split(/\r?\n/);
    let date = '', i = 0;
    if (lines.length) date = lines[i++].trim();

    const shows = {};
    while (i < lines.length) {
        while (i < lines.length && lines[i].trim() === '') i++;
        if (i >= lines.length) break;

        const showName = lines[i++].trim();
        if (!showName) continue;

        const dancers = [];
        while (i < lines.length && lines[i].trim() !== '') {
            lines[i].split(',').forEach(p => {
                const d = p.trim();
                if (d) dancers.push(d);
            });
            i++;
        }
        shows[showName] = dancers;
    }
    const obj = { [date]: shows };

    const code = `const schedule = ${JSON.stringify(obj, null, 4)};`;
    out.textContent = code;
    out.style.display = 'block';

    msg.textContent = '–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –≤—ã—à–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é schedule';
    msg.className = 'success';
    msg.style.display = 'block';
}

function copyToClipboard() {
    const generatedCode = document.getElementById('generatedCode');
    if (generatedCode.style.display === 'none') {
        alert('–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–¥!');
        return;
    }
    const code = generatedCode.textContent;
    navigator.clipboard.writeText(code)
        .then(() => {
            const saveMsg = document.getElementById('saveMsg');
            saveMsg.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
            saveMsg.className = 'success';
            saveMsg.style.display = 'block';
            setTimeout(() => {
                saveMsg.style.display = 'none';
            }, 2000);
        })
        .catch(err => {
            console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:', err);
            const saveMsg = document.getElementById('saveMsg');
            saveMsg.textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å';
            saveMsg.className = 'error';
            saveMsg.style.display = 'block';
            setTimeout(() => {
                saveMsg.style.display = 'none';
            }, 2000);
        });
}

/* ===== 4.  –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ –ø–æ–∏—Å–∫ —Ç–∞–Ω—Ü–æ—Ä–∞ ===== */
function displaySchedule() {
    const dateDisplay = document.getElementById('dateDisplay');
    const scheduleListUl = document.getElementById('scheduleListUl');
    const backButtonContainer = document.getElementById('backButtonContainer');

    const date = Object.keys(schedule)[0];
    const shows = schedule[date];

    dateDisplay.textContent = date; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ –¥–∞—Ç—É –±–µ–∑ –∏–º–µ–Ω–∏
    scheduleListUl.innerHTML = '';

    if (Object.keys(shows).length === 0) {
        const li = document.createElement('li');
        li.textContent = '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—É—Å—Ç–æ';
        scheduleListUl.appendChild(li);
        return;
    }

    Object.keys(shows).forEach(showName => {
        const li = document.createElement('li');
        li.textContent = showName;

        const ul = document.createElement('ul');
        ul.style.display = 'flex';
        ul.style.flexWrap = 'wrap';
        ul.style.gap = '5px';
        ul.style.marginTop = '5px';
        ul.style.marginBottom = '5px';

        const showNameDiv = document.createElement('div');
        showNameDiv.textContent = showName;
        showNameDiv.style.fontWeight = 'bold';
        showNameDiv.style.fontSize = '14px';
        showNameDiv.style.marginBottom = '5px';

        shows[showName].forEach(dancer => {
            const dancerLi = document.createElement('li');

            const dancerButton = document.createElement('button');
            dancerButton.innerHTML = `<span>${dancer}</span>`;
            dancerButton.onclick = function(e) {
                findDancer(dancer);
            };
            dancerLi.appendChild(dancerButton);

            ul.appendChild(dancerLi);
        });

        const showContainer = document.createElement('div');
        showContainer.appendChild(showNameDiv);
        showContainer.appendChild(ul);
        showContainer.style.border = '1px solid #d1c4e9';
        showContainer.style.borderRadius = '5px';
        showContainer.style.padding = '5px';
        showContainer.style.marginBottom = '10px';

        scheduleListUl.appendChild(showContainer);
    });

    // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–Ω–æ–ø–∫–∏ "–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞"
    backButtonContainer.innerHTML = '';

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞" –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    const backButton = document.createElement('button');
    backButton.textContent = '–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞';
    backButton.onclick = () => {
        displaySchedule(); // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—â–µ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
    };
    backButtonContainer.appendChild(backButton);
}

function findDancer(name) {
    const date = Object.keys(schedule)[0];
    const shows = schedule[date];

    const result = Object.keys(shows).filter(showName =>
        shows[showName].includes(name)
    );

    const ul = document.getElementById('scheduleListUl');
    ul.innerHTML = '';
    if (result.length === 0) {
        const li = document.createElement('li');
        li.textContent = '–ù–µ –Ω–∞–π–¥–µ–Ω–æ';
        ul.appendChild(li);
    } else {
        result.forEach(showName => {
            const li = document.createElement('li');
            li.textContent = showName;
            ul.appendChild(li);
        });
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–∞—Ç—ã —Å –∏–º–µ–Ω–µ–º —á–µ–ª–æ–≤–µ–∫–∞
    const dateDisplay = document.getElementById('dateDisplay');
    dateDisplay.textContent = `${date} (${name})`;

    // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–Ω–æ–ø–∫–∏ "–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞"
    const backButtonContainer = document.getElementById('backButtonContainer');
    backButtonContainer.innerHTML = '';

    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞" –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    const backButton = document.createElement('button');
    backButton.textContent = '–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞';
    backButton.onclick = () => {
        displaySchedule(); // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—â–µ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
    };
    backButtonContainer.appendChild(backButton);
}

/* ===== 5.  –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ===== */
window.onload = () => {
    displaySchedule();
};
</script>
</body>
</html>
